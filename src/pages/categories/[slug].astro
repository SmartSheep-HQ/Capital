---
import PageLayout from "../../layouts/PageLayout.astro";
import PostList from "../../components/PostList.astro";

import { graphQuery } from "../../scripts/requests";

export const prerender = false;

const { slug } = Astro.params;

const response = await fetch(
  `https://feed.smartsheep.studio/api/posts?${new URLSearchParams({
    offset: (0).toString(),
    take: (100).toString(),
    category: slug ?? "none",
    realmId: process.env.PUBLIC_REALM_ID ?? (0).toString(),
  })}`,
);
const posts = (await response.json())["data"];
---

<PageLayout title="分类检索">
  <div class="max-w-[720px] mx-auto">
    <div class="pt-16 pb-6 px-6">
      <h1 class="text-4xl font-bold">分类检索</h1>
      <p class="pt-3">以下是包含该分类的记录……</p>
    </div>

    <PostList posts={posts as any[]} />
  </div>
</PageLayout>
